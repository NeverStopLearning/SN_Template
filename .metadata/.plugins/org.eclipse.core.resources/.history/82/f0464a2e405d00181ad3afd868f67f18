const Validator = require('validator');

const isEmpty = require('../util/is-empty.js');

//see if there is a better way to do this validation class part
module.exports = function validateProfileInput(data){
	let errors = {};
	
	//trim and initialize empty string for Validatory.isEmpty(string)
	data.handle = !isEmpty(data.handle ? data.handle.trim(): data.handle) ? data.handle.trim() : '' ;
	data.status = !isEmpty(data.status ? data.status.trim(): data.status) ? data.status.trim() : '' ;
	data.skills = !isEmpty(data.skills ? data.skills.trim(): data.skills) ? data.skills.trim() : '' ;

	
	//validate handle - order matters here so maybe use an "else if"
	if(!Validator.isLength(data.handle, { min:2, max:40 })){
		errors.handle = 'Handle must be between 2 and 40 characters';
	}
	
	if(Validator.isEmpty(data.handle)){
		errors.handle = "Profile handle is required"
	}
	
/*	
	//validate email - order matters here so maybe use an "else if"
	if(!Validator.isEmail(data.email)){
		errors.email = 'Email is invalid';
	}
	
	if(Validator.isEmpty(data.email)){
		errors.email = 'Email field is required';
	}
	
	
	//validate password	
	if(!Validator.isLength(data.password, { min: 5, max: 30})){
		errors.password = "Password must be a least 5 characters";
	}
	
	if(Validator.isEmpty(data.password)){
		errors.password = "Password field is required";
	}
	
*/	

	
	return {
		errors : errors, // or just | errors, |
		isValid: isEmpty(errors)
	}
	
}